var DOM_o=Object.create(null);DOM_o.rootVar__s=e=>window.getComputedStyle(document.documentElement).getPropertyValue(e)||"",DOM_o.rootVar__v=(e,t)=>document.documentElement.style.setProperty(e,t),DOM_o.eval__v=e=>e&&new Function(e)(),DOM_o.adopt__v=(e,t,o)=>{t.addEventListener("load",()=>{e.appendChild(document.adoptNode((t.contentDocument.body||t.contentDocument).children[0])),t.remove(),o&&o(e)})},DOM_o.adoptFrame__v=(e,t)=>{const o=e.querySelector("iframe");o&&(DOM_o.adopt__v(e,o,t),o.src=e.getAttribute("data-src")+".html")},DOM_o.listReverse__v=e=>{const t=Array.prototype.slice.call(document.querySelectorAll(`${e} li`));t&&t.forEach(e=>e.parentNode.insertBefore(e,e.parentNode.firstChild))},DOM_o.scroll__v=e=>{const t={top:e?document.querySelector("body").offsetHeight:0,left:0,behavior:"smooth"};window.scroll(t)},DOM_o.loadJS__v=(e,t)=>{let o=document.querySelector(`#${t}`);o&&o.parentNode.removeChild(o),o=document.createElement("script"),t&&(o.id=t),document.body.appendChild(o),o.src=e},DOM_o.enableAsset__v=(e,t)=>{const o=document.querySelector(`#${e}`);o&&(t(o),o.removeAttribute("id"))},DOM_o.enableLink__v=e=>{DOM_o.enableAsset__v(e,e=>{e.media="all",e.removeAttribute("disabled")})},DOM_o.enableScript__v=(e,t=!1)=>{DOM_o.enableAsset__v(e,o=>DOM_o.eval__v(t?`DOM_o.loadJS__v( 'https://typexjs.netlify.app/assets/scripts/js/${e}.min.js', '${e}' )`:o.innerHTML))};var SERVICE_o=Object.create(null);SERVICE_o.init__v=e=>{navigator.serviceWorker.register(e).then(null,e=>console.log(`ServiceWorker registration failed [error: ${e}]`))};class KVIdb{constructor(e="kv_db",t="kv_store",o=1){this.idb_o=null,this.ready_o=null,this.idb_s=e,this.store_s=t,this.version_n=o,this.init__v()}init__v(){this.ready_o=new Promise((e,t)=>{const o=window.indexedDB.open(this.idb_s,this.version_n);o.onupgradeneeded=e=>{this.idb_o=e.target.result,this.idb_o.createObjectStore(this.store_s)},o.onsuccess=t=>{this.idb_o=t.target.result,e(t.target.result)},o.onerror=e=>t(e.target.error)})}store__o(e="readonly"){return this.idb_o.transaction([this.store_s],e).objectStore(this.store_s)}set__v(e,t){return this.ready_o.then(()=>new Promise((o,r)=>{const s=this.store__o("readwrite").put(t,e);s.onsuccess=o,s.onerror=r}))}update__v(e,t,o){return this.ready_o.then(()=>new Promise((r,s)=>{const n=this.store__o("readwrite"),_=n.get(e);_.onsuccess=()=>{const a=_.result;a[t]=o;const c=n.put(a,e);c.onsuccess=r,c.onerror=s},_.onerror=s}))}walk__v(e){return this.ready_o.then(()=>new Promise((t,o)=>{const r=this.store__o().openCursor();r.onsuccess=o=>{let r=o.target.result;r?(e(r.key,r.value),r.continue()):t()},r.onerror=o}))}get__(e){return this.ready_o.then(()=>new Promise((t,o)=>{const r=this.store__o().get(e);r.onsuccess=e=>t(e.target.result),r.onerror=o}))}key__b(e){return this.ready_o.then(()=>new Promise((t,o)=>{const r=this.store__o().count(e);r.onsuccess=e=>t(e.target.result),r.onerror=o}))}last__(){return this.ready_o.then(()=>new Promise((e,t)=>{const o=this.store__o("readwrite").openCursor(null,"prev");o.onsuccess=t=>{t.target.result&&e(t.target.result.value)},o.onerror=t}))}deleteAll__v(e){return this.ready_o.then(()=>new Promise((t,o)=>{const r=this.store__o("readwrite"),s=store.openCursor();s.onsuccess=t=>{let o,s=t.target.result;s&&(o=s.value,e(o)&&r.delete(s.key),s.continue())},s.onerror=o}))}delete__v(e){return this.ready_o.then(()=>new Promise((t,o)=>{const r=this.store__o("readwrite").delete(e);r.onsuccess=t,r.onerror=o}))}clear__v(){return this.ready_o.then(()=>new Promise((e,t)=>{const o=this.store__o("readwrite").clear();o.onsuccess=e,o.onerror=t}))}deleteIDB__v(){window.indexedDB.deleteDatabase(this.idb_s)}}var SKIN_o=Object.create(null);SKIN_o.idb_o=new KVIdb("typexjs_idb","typexjs_store"),SKIN_o.hueBase__v=e=>{SKIN_o.idb_o.get__("hue_base").then(t=>{void 0===e&&(e=t||210),SKIN_o.idb_o.set__v("hue_base",e),DOM_o.rootVar__v("--c_hue_base",e)})},SKIN_o.lumMode__v=e=>{SKIN_o.idb_o.get__("lum_mode").then(t=>{void 0===e&&(e=t||1),SKIN_o.idb_o.set__v("lum_mode",e),DOM_o.rootVar__v("--lum_mode",e)})};var COMMENT_o=Object.create(null);COMMENT_o.init__v=()=>{const e=document.querySelector('[data--="comment"]');if(!e.hasChildNodes()){const t=document.createElement("script");t.setAttribute("data--","script_comment"),t.setAttribute("repo","octoxalis/typexjs"),t.setAttribute("issue-term","t"),t.setAttribute("theme","photon-dark"),t.setAttribute("crossorigin","anonymous"),t.setAttribute("async",!0),t.src="https://utteranc.es/client.js",e.appendChild(t)}e.classList.toggle("retract")};var PERF_o=Object.create(null);PERF_o.init__v=()=>{const e=document.querySelector('[data--="performance"]');if(!e.hasChildNodes()){const t=document.createElement("link");t.rel="stylesheet",t.href="https://typexjs.netlify.app/assets/styles/css/lib_performance.min.css",e.appendChild(t);const o=document.createElement("script");o.setAttribute("data--","script_performance"),e.appendChild(o),o.src="https://typexjs.netlify.app/assets/scripts/js/performance.min.js"}e.classList.toggle("retract")};var EVENT_o=Object.create(null);EVENT_o.init_o={note_b:!1},EVENT_o.service__v=()=>{"serviceWorker"in navigator&&window.addEventListener("load",SERVICE_o.init__v("https://typexjs.netlify.app/assets/scripts/js/service_worker.min.js"))},EVENT_o.skin__v=()=>{SKIN_o.hueBase__v(),SKIN_o.lumMode__v();const e=document.querySelector('[data--="band_title"]');e.addEventListener("click",t=>{const o=~~((t.clientX-e.getBoundingClientRect().left)/e.offsetWidth*360);SKIN_o.hueBase__v(o);const r=t.clientY-e.getBoundingClientRect().top>.5*e.offsetHeight?-1:1;SKIN_o.lumMode__v(r)})},EVENT_o.slots__v=()=>{for(const e of document.querySelectorAll("[data-slot]"))e.addEventListener("click",()=>{const t=e.getAttribute("data-slot");let o=document.querySelector(`section[data-slot="${t}"]`);if(o)return void o.classList.toggle("unseen");performance.mark("EVENT_o.slots__v:start"),o=document.createElement("section"),o.setAttribute("data-slot",t);let r=window.location.href;"https://typexjs.netlify.app/"===r&&(r+="index.html"),o.setAttribute("data-src",r.replace(".html",`_${t}`));const s=document.createElement("iframe");o.appendChild(s),e.after(o),DOM_o.adoptFrame__v(o,()=>DOM_o.enableScript__v("note",!0)),performance.mark("EVENT_o.slots__v:end")})},EVENT_o.navigation__v=()=>{const e=document.querySelector('[data--="page_nav"]');e&&(e.addEventListener("click",e=>{const t=e.target.closest("BUTTON");if(!t)return;let o=t.getAttribute("data--");switch(o){case"nav_menu":return void EVENT_o.menu__v();case"nav_top":case"nav_bottom":return void DOM_o.scroll__v("nav_bottom"===o);case"nav_previous":case"nav_next":{if(document.querySelector('[data--="menu_iframe"]'))return;const e=LINK_PAGE_o.url__s(o);e&&(window.location=e)}}}),document.querySelectorAll('[data--="page_nav"] > button').forEach(e=>{switch(e.getAttribute("data--")){case"nav_top":case"nav_bottom":case"nav_menu":return}["mouseenter","mouseleave"].forEach(t=>e.addEventListener(t,e=>{document.querySelector('[data--="menu_iframe"]')||LINK_PAGE_o.near__v(t,e.currentTarget)}))}))},EVENT_o.scroll__v=()=>{const e=document.documentElement,t=document.body,o=document.querySelector("[data--=page_scroll]");document.addEventListener("scroll",()=>o.style.setProperty("--scroll",`${(e.scrollTop||t.scrollTop)/((e.scrollHeight||t.scrollHeight)-e.clientHeight)*100}%`))},EVENT_o.scroll__v(),EVENT_o.menu__v=()=>{if(document.querySelector('[data--="menu"]'))return void MENU_o.toggle__v();performance.mark("EVENT_o.menu__v:start");const e=document.querySelector('[data-src="https://typexjs.netlify.app/menu"]'),t=document.createElement("iframe");t.setAttribute("data--","menu_iframe"),e.appendChild(t),DOM_o.adoptFrame__v(e,()=>{["note","menu"].forEach(e=>DOM_o.enableScript__v(e,!0))}),performance.mark("EVENT_o.menu__v:end")},EVENT_o.comment__v=()=>{const e=document.querySelector('[data--="comment_visibility"]');e&&e.addEventListener("click",e=>COMMENT_o.init__v())},EVENT_o.performance__v=()=>{const e=document.querySelector('[data--="perf_visibility"]');e&&e.addEventListener("click",e=>PERF_o.init__v())},["service","skin","slots","navigation","performance","comment"].forEach(e=>EVENT_o[`${e}__v`]());
